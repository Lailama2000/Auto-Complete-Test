{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\laila_mardene\\\\autocomplete\\\\src\\\\Components\\\\InputField.js\",\n  _s = $RefreshSig$();\nimport axios from \"axios\";\nimport React, { useEffect, useState, useCallback, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function InputField() {\n  _s();\n  const [data, setData] = useState([]); // All data\n  const [search, setSearch] = useState(\"\"); // Search query\n  const [filteredOptions, setFilteredOptions] = useState([]); // Filtered data based on search\n  const [displayedOptions, setDisplayedOptions] = useState([]); // Data currently displayed in the UI\n  const [page, setPage] = useState(1); // Current page for pagination\n  const [isFetching, setIsFetching] = useState(false); // Flag to prevent multiple simultaneous fetches\n  const [hasMore, setHasMore] = useState(true); // Flag to check if more data is available to load\n\n  const containerRef = useRef(null);\n  useEffect(() => {\n    axios.get(\"https://softwium.com/api/books\").then(res => {\n      setData(res.data);\n      setDisplayedOptions(res.data.slice(0, 10)); // Initially display first 10 items\n    }).catch(error => {\n      console.error(\"Error fetching data\", error);\n    });\n  }, []);\n  const loadMoreData = useCallback(() => {\n    if (isFetching || !hasMore) return;\n    setIsFetching(true);\n    setTimeout(() => {\n      const nextPage = page + 1;\n      const moreItems = (search ? filteredOptions : data).slice((nextPage - 1) * 10, nextPage * 10); // Load next 10 items\n\n      if (moreItems.length > 0) {\n        setDisplayedOptions(prevOptions => [...prevOptions, ...moreItems]);\n        setPage(nextPage);\n      } else {\n        setHasMore(false);\n      }\n      setIsFetching(false);\n    }, 1000);\n  }, [isFetching, hasMore, page, data, filteredOptions, search]);\n  const handleSearchChange = e => {\n    const query = e.target.value.toLowerCase();\n    setSearch(query);\n    setPage(1); // Reset to the first page when the search query changes\n\n    if (query.length > 0) {\n      const filtered = data.filter(book => book.title.toLowerCase().includes(query) || book.id.toString() === query);\n      setFilteredOptions(filtered);\n      setDisplayedOptions(filtered.slice(0, 10)); // Display the first 10 filtered items\n      setHasMore(filtered.length > 10); // Check if there are more items to load\n    } else {\n      setFilteredOptions([]);\n      setDisplayedOptions(data.slice(0, 10)); // Reset to the first 10 items of the entire data\n      setHasMore(data.length > 10);\n    }\n  };\n  const handleScroll = () => {\n    if (containerRef.current) {\n      const {\n        scrollTop,\n        scrollHeight,\n        clientHeight\n      } = containerRef.current;\n      if (scrollTop + clientHeight >= scrollHeight - 5) {\n        loadMoreData();\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      placeholder: \"Search for a book\",\n      onChange: handleSearchChange,\n      value: search\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), displayedOptions.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyleType: \"none\",\n        padding: 0\n      },\n      children: displayedOptions.map((book, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        onScroll: handleScroll,\n        ref: containerRef,\n        style: {\n          padding: \"5px\",\n          cursor: \"pointer\",\n          border: \"1px solid #ccc\",\n          margin: \"5px 0\"\n        },\n        onClick: () => console.log(`Selected book: ${book.title}, ID: ${book.id}`),\n        children: [book.title, \" - \", book.authors.join(\", \")]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No results found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this), isFetching && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading more items...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 22\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(InputField, \"yEpQOQ5U0TH8YZBMpMOymJ6Osvg=\");\n_c = InputField;\nvar _c;\n$RefreshReg$(_c, \"InputField\");","map":{"version":3,"names":["axios","React","useEffect","useState","useCallback","useRef","jsxDEV","_jsxDEV","InputField","_s","data","setData","search","setSearch","filteredOptions","setFilteredOptions","displayedOptions","setDisplayedOptions","page","setPage","isFetching","setIsFetching","hasMore","setHasMore","containerRef","get","then","res","slice","catch","error","console","loadMoreData","setTimeout","nextPage","moreItems","length","prevOptions","handleSearchChange","e","query","target","value","toLowerCase","filtered","filter","book","title","includes","id","toString","handleScroll","current","scrollTop","scrollHeight","clientHeight","children","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","style","listStyleType","padding","map","index","onScroll","ref","cursor","border","margin","onClick","log","authors","join","_c","$RefreshReg$"],"sources":["C:/Users/laila_mardene/autocomplete/src/Components/InputField.js"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState, useCallback, useRef } from \"react\";\r\n\r\nexport default function InputField() {\r\n  const [data, setData] = useState([]); // All data\r\n  const [search, setSearch] = useState(\"\"); // Search query\r\n  const [filteredOptions, setFilteredOptions] = useState([]); // Filtered data based on search\r\n  const [displayedOptions, setDisplayedOptions] = useState([]); // Data currently displayed in the UI\r\n  const [page, setPage] = useState(1); // Current page for pagination\r\n  const [isFetching, setIsFetching] = useState(false); // Flag to prevent multiple simultaneous fetches\r\n  const [hasMore, setHasMore] = useState(true); // Flag to check if more data is available to load\r\n\r\n  const containerRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"https://softwium.com/api/books\")\r\n      .then((res) => {\r\n        setData(res.data);\r\n        setDisplayedOptions(res.data.slice(0, 10)); // Initially display first 10 items\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error fetching data\", error);\r\n      });\r\n  }, []);\r\n\r\n  const loadMoreData = useCallback(() => {\r\n    if (isFetching || !hasMore) return;\r\n\r\n    setIsFetching(true);\r\n\r\n    setTimeout(() => {\r\n      const nextPage = page + 1;\r\n      const moreItems = (search ? filteredOptions : data).slice(\r\n        (nextPage - 1) * 10,\r\n        nextPage * 10\r\n      ); // Load next 10 items\r\n\r\n      if (moreItems.length > 0) {\r\n        setDisplayedOptions((prevOptions) => [...prevOptions, ...moreItems]);\r\n        setPage(nextPage);\r\n      } else {\r\n        setHasMore(false);\r\n      }\r\n\r\n      setIsFetching(false);\r\n    }, 1000);\r\n  }, [isFetching, hasMore, page, data, filteredOptions, search]);\r\n\r\n  const handleSearchChange = (e) => {\r\n    const query = e.target.value.toLowerCase();\r\n    setSearch(query);\r\n    setPage(1); // Reset to the first page when the search query changes\r\n\r\n    if (query.length > 0) {\r\n      const filtered = data.filter(\r\n        (book) =>\r\n          book.title.toLowerCase().includes(query) ||\r\n          book.id.toString() === query\r\n      );\r\n      setFilteredOptions(filtered);\r\n      setDisplayedOptions(filtered.slice(0, 10)); // Display the first 10 filtered items\r\n      setHasMore(filtered.length > 10); // Check if there are more items to load\r\n    } else {\r\n      setFilteredOptions([]);\r\n      setDisplayedOptions(data.slice(0, 10)); // Reset to the first 10 items of the entire data\r\n      setHasMore(data.length > 10);\r\n    }\r\n  };\r\n\r\n  const handleScroll = () => {\r\n    if (containerRef.current) {\r\n      const { scrollTop, scrollHeight, clientHeight } = containerRef.current;\r\n      if (scrollTop + clientHeight >= scrollHeight - 5) {\r\n        loadMoreData();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        placeholder=\"Search for a book\"\r\n        onChange={handleSearchChange}\r\n        value={search}\r\n      />\r\n      {displayedOptions.length > 0 ? (\r\n        <ul style={{ listStyleType: \"none\", padding: 0 }}>\r\n          {displayedOptions.map((book, index) => (\r\n            <li\r\n              onScroll={handleScroll}\r\n              ref={containerRef}\r\n              key={index}\r\n              style={{\r\n                padding: \"5px\",\r\n                cursor: \"pointer\",\r\n                border: \"1px solid #ccc\",\r\n                margin: \"5px 0\",\r\n              }}\r\n              onClick={() =>\r\n                console.log(`Selected book: ${book.title}, ID: ${book.id}`)\r\n              }\r\n            >\r\n              {book.title} - {book.authors.join(\", \")}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      ) : (\r\n        <p>No results found</p>\r\n      )}\r\n      {isFetching && <p>Loading more items...</p>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}